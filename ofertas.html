<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ofertas 2x1 | Greta Shop</title>
    <link rel="stylesheet" href="index.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">
</head>

<body>
    <div class="container">
        <header>
            <div class="logo-container">
                <a href="index.html"><img src="logo.jpeg" alt="Greta Shop Logo" class="logo"></a>
            </div>
            <h1 style="color: #ff4b2b;">OFERTAS 2x1 üî•</h1>
            <p class="subtitle">¬°Llevate 2 pares y ahorr√° un mont√≥n!</p>
        </header>

        <main class="links">
            <div id="offers-container">
                <div class="loader">Cargando las mejores ofertas...</div>
            </div>

            <a href="https://wa.me/5491173739122?text=Hola! Quiero aprovechar la Oferta 2x1" class="btn btn-red"
                style="margin-top: 30px;">
                <span class="icon">üí¨</span> Reservar Oferta por WhatsApp
            </a>

            <a href="index.html" class="btn btn-outline" style="margin-top: 15px;">
                <span class="icon">üè†</span> Volver al Inicio
            </a>
        </main>

        <footer>
            <p class="footer-note">Ofertas v√°lidas hasta agotar stock. ¬°No te cuelgues!</p>
        </footer>
    </div>

    <script>
        async function loadOffers() {
            const container = document.getElementById('offers-container');
            try {
                const response = await fetch('zapatillas_greta.csv');
                const data = await response.text();
                const lines = data.split('\n').filter(line => line.trim() !== '');

                const categories = {
                    'Mujer': [
                        { name: 'Adidas rosa', combo: 'Combo Urbano', price: 60000 },
                        { name: 'Nike Zoom mujer', combo: 'Combo Urbano', price: 60000 },
                        { name: 'NB Beige y Rosa', combo: 'Combo Premium', price: 80000 },
                        { name: 'Vans knu black', combo: 'Combo Premium', price: 80000 }
                    ],
                    'Hombre': [
                        { name: 'Puma park style', combo: 'Combo Street', price: 60000 },
                        { name: 'Nike SB grises', combo: 'Combo Street', price: 60000 },
                        { name: 'Vans skater Verdes', combo: 'Combo Skater', price: 80000 },
                        { name: 'Nike SB Black', combo: 'Combo Skater', price: 80000 }
                    ]
                };

                const inventory = {};
                for (let i = 1; i < lines.length; i++) {
                    const values = lines[i].split(',');
                    if (values.length < 5) continue;
                    const name = values[0];
                    if (!inventory[name]) inventory[name] = values[4]; // Link multimedia
                }

                container.innerHTML = '';

                for (const [gender, items] of Object.entries(categories)) {
                    const h2 = document.createElement('h2');
                    h2.style.cssText = gender === 'Mujer' ? "margin: 20px 0 15px; font-size: 1.4rem; color: #ffffff;" : "margin: 30px 0 15px; font-size: 1.4rem; color: #ffffff;";
                    h2.innerHTML = `${gender === 'Mujer' ? 'üë†' : 'üëü'} ${gender} Oferta`;
                    container.appendChild(h2);

                    const combos = {};
                    items.forEach(item => {
                        if (!combos[item.combo]) combos[item.combo] = { price: item.price, items: [] };
                        combos[item.combo].items.push({ name: item.name, link: inventory[item.name] || '#' });
                    });

                    for (const [comboName, comboData] of Object.entries(combos)) {
                        const card = document.createElement('div');
                        card.className = 'combo-card';

                        const formattedPrice = new Intl.NumberFormat('es-AR', {
                            style: 'currency', currency: 'ARS', maximumFractionDigits: 0
                        }).format(comboData.price);

                        card.innerHTML = `
                            <div class="combo-header">
                                <span style="font-weight: 600;">${comboName}</span>
                                <span class="combo-price">${formattedPrice}</span>
                            </div>
                            <div class="combo-items">
                                ${comboData.items.map(item => `
                                    <div class="combo-item">
                                        <span>${item.name}</span>
                                        <a href="${item.link}" target="_blank" class="btn-card">Fotos</a>
                                    </div>
                                `).join('')}
                            </div>
                        `;
                        container.appendChild(card);
                    }
                }
            } catch (error) {
                console.error('Error cargando ofertas:', error);
                container.innerHTML = '<div class="error">No se pudieron cargar las ofertas. Escribinos por WhatsApp.</div>';
            }
        }
        window.onload = loadOffers;
    </script>
</body>

</html>